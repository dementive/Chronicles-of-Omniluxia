#fort has to be first in order
fortress_building = {
	fort_level = 1
	
	cost = 50
	time = 915
	
	
	
	modification_display = {
		0 = fort_level
	}
#AI handles fort building in code. It's too complicated to script this
}

#settlement
mining_settlement_building = { #Mine
	base_resources = 0.5
	local_freemen_output = 0.05
	local_serfs_output = 0.2
	local_population_capacity_modifier = 0.25

	potential = {
		has_city_status = no
	}
	
	allow = {
		has_minable_trade_good_trigger = yes 
	}
	
	cost = 120
	time = 730
	
	modification_display = {
		0 = base_resources
		1 = local_serfs_output
		2 = local_freemen_output
		3 = local_population_capacity_modifier
	}
	
	chance = {
		modifier = {
			has_minable_trade_good_trigger = yes
			add = 5
		}
	}
	
}

farming_settlement_building = { #Farming Settlement
	local_monthly_food_modifier = 0.66
	base_resources = 0.5	
	local_serfs_output = 0.25
	local_serfs_happyness = 0.05
	local_population_capacity_modifier = 0.3
	potential = {
		has_city_status = no
	}
	
	allow = {
		has_food_trade_good_trigger = yes
	}
	
	cost = 50
	time = 730
	
	modification_display = {
		0 = local_monthly_food_modifier
		1 = local_serfs_output
		2 = local_population_capacity_modifier
		3 = local_serfs_happyness
		4 = base_resources		
	}
	
	chance = {
		modifier = {
			has_food_trade_good_trigger = yes
			add = 20
		}
	}
	
}

fishing_settlement_building = { #fishing Settlement
	local_monthly_food_modifier = 0.75
	base_resources = 0.5	
	local_serfs_output = 0.1
	local_ship_recruit_speed = 0.1
	local_serfs_happyness = 0.05
	local_population_capacity_modifier = 0.4
	potential = {
		has_city_status = no
	}
	
	allow = {
	trade_goods = fish
	is_coastal = yes
	}
	
	cost = 75
	time = 730
	
	modification_display = {
		0 = local_monthly_food_modifier
		1 = local_serfs_output
		2 = local_population_capacity_modifier
		3 = local_serfs_happyness
		3 = local_ship_recruit_speed
	}
	
	chance = {
		modifier = {
			has_food_trade_good_trigger = yes
			add = 20
		}
	}
	
}


town_settlement_building = { #Town
	local_monthly_food_modifier = 0.25
	local_serfs_output = 0.25
	local_serfs_happyness = 0.1
	local_population_capacity_modifier = 0.5
	local_commerce_value_modifier = 0.33
	local_population_growth = 0.05
	potential = {
		has_city_status = no
	}
	
	allow = {
	any_neighbor_province = { has_city_status = yes }
	}
	
	cost = 50
	time = 1460
	
	modification_display = {
		0 = local_commerce_value_modifier
		1 = local_population_capacity_modifier
		2 = local_serfs_output
		3 = local_serfs_happyness
		4 = local_monthly_food_modifier
		5 = local_population_growth
	}
	
	chance = {
		modifier = {
		any_neighbor_province = { has_city_status = yes }
			add = 15
		}
	}
	
}

noble_estate_building = { #estate Settlement
	local_serfs_output = 0.2
	local_serfs_happyness = -0.1
	local_population_capacity_modifier = 0.2
	local_tnoble_happyness = 0.15
	local_tnoble_desired_pop_ratio = 0.2
	local_tnoble_output = 0.15
	potential = {
		has_city_status = no
	}
	
	allow = {
		has_food_trade_good_trigger = yes
	}
	
	cost = 150
	time = 730
	
	modification_display = {
		0 = local_tnoble_happyness
		1 = local_tnoble_output
		2 = local_tnoble_desired_pop_ratio
		3 = local_serfs_output
		4 = local_population_capacity_modifier
		5 = local_serfs_happyness
	}
	
	chance = {
		modifier = {
			has_food_trade_good_trigger = yes
			add = 20
		}
	}
	
}

hunting_camp_building = { #hunting camp
	local_monthly_food_modifier = 0.75	
	local_serfs_output = 0.1
	local_population_capacity_modifier = 0.2
	base_resources = 0.5
	potential = {
		has_city_status = no
	}
	
	allow = {
	
	OR = {
	trade_goods = fur
	trade_goods = wild_game
	}
	
	}
	
	cost = 75
	time = 365
	
	modification_display = {
		0 = local_monthly_food_modifier
		1 = local_serfs_output
		2 = local_population_capacity_modifier
		3 = base_resources
	}
	
	chance = {
		modifier = {
			trade_goods = fur
			trade_goods = wild_game
			add = 10
		}
	}
	
}

logging_camp_building = { #logging camp
	local_serfs_output = 0.25
	base_resources = 1
	potential = {
		has_city_status = no
	}
	
	allow = {
	trade_goods = wood
	
	}
	
	cost = 50
	time = 365
	
	modification_display = {
		0 = local_serfs_output
		1 = base_resources
	}
	
	chance = {
		modifier = {
			trade_goods = wood
			add = 10
		}
	}	
}


noble_castle_building = { #estate Settlement
	local_population_capacity_modifier = 0.25
	local_manpower_modifier = 0.25
	local_tnoble_happyness = 0.25
	local_tnoble_desired_pop_ratio = 0.25
	local_defensive = 0.5
	fort_level = 1
	potential = {
		has_city_status = no
	}
	
	allow = {
	
	or = {
	trade_goods = stone
	terrain = hills
	state = { trade_good_surplus = { target = stone  value >= 1 } } 
	}
		
		NOT = {
		
		area = { any_area_province = { has_building = noble_castle_building  } }
		
		}
		
		
	}
	
	cost = 150
	time = 3650
	
	modification_display = {
		0 = fort_level
		1 = local_population_capacity_modifier
		2 = local_tnoble_desired_pop_ratio
		3 = local_serfs_output
		4 = local_manpower_modifier
		5 = local_tnoble_happyness 
	}
	
	chance = {
		modifier = {
			
				or = {
				trade_goods = stone
				terrain = hills
				}	
			
			add = 5
		}
	}
	
}

monastery_settlement_building = { 
	local_research_points_modifier = 0.1
	research_points = 2.5
	local_happiness_for_same_religion_modifier = 0.1
	local_pop_assimilation_speed = 0.5
	local_pop_conversion_speed = 0.5
	

	potential = {
		has_city_status = no
	}
	
	allow = {
		
		
		NOT = {
		
		area = { any_area_province = { has_building = monastery_settlement_building  } }
		
		}
		
		
	}
	
	cost = 100
	time = 1500
	
	modification_display = {
	0 = value_research
	1 = local_happiness_for_same_religion_modifier

	}
	
	chance = {
			modifier = {
			add = 4
			NOT = { dominant_province_religion = owner.religion }
		}
		modifier = {
			NOT = { dominant_province_culture_group = owner.culture_group }
			add = 4
		}
	}
	
}


#city
undercity_farms_building = { #Farming Settlement
	local_monthly_food_modifier = 0.33
	local_serfs_output = 0.15
	local_serfs_desired_pop_ratio = 0.075
	base_resources = 0.5	
	potential = {
		has_city_status = yes
	}
	
	allow = {
		has_food_trade_good_trigger = yes
	}
	
	cost = 75
	time = 730
	
	modification_display = {
		0 = local_monthly_food_modifier
		1 = local_serfs_output
		2 = local_serfs_desired_pop_ratio
		3 = base_resources		
	}
	
	chance = {
		modifier = {
			has_food_trade_good_trigger = yes
			add = 20
		}
	}
	
}

housing_district_building = { #housing district
	local_population_capacity = 5
	local_population_capacity_modifier = 0.05
	local_freemen_desired_pop_ratio = 0.05
	local_citizen_desired_pop_ratio = 0.05
	
	cost = 50
	time = 365

	potential = {
		has_city_status = yes
	}
	
	
	modification_display = {
		0 = local_population_capacity
		1 = local_population_capacity_modifier
		2 = local_freemen_desired_pop_ratio
		3 = local_citizen_desired_pop_ratio
	}
	
	chance = {
		modifier = {
			total_population >= population_cap
			add = 10
		}
		
	modifier = {
			add = 
			{
				value = province_tax_income
				multiply = {
					value = 1
				}
			}
		}
		
	}
	
}

trade_district_building = { #trade district
	local_population_capacity_modifier = 0.025
	local_citizen_desired_pop_ratio = 0.075
	local_citizen_output = 0.05
	local_commerce_value_modifier = 0.25
	
	cost = 100
	time = 730

	potential = {
		has_city_status = yes
	}
	
	
	modification_display = {
		0 = local_citizen_desired_pop_ratio
		1 = local_commerce_value_modifier
		2 = local_population_capacity_modifier
	}
	
	chance = {
		modifier = {
			total_population >= population_cap
			add = 2
		}
		
		modifier = {
			add = 
			{
				value = province_commerce_income
				multiply = {
					value = 2
				}
			}
		}
		
	}
	
}

craftsmans_district_building = { #trade district
	local_population_capacity_modifier = 0.025
	local_freemen_desired_pop_ratio = 0.075
	local_freemen_output = 0.05
	local_serfs_output = 0.05
	base_resources = 0.05
	
	cost = 100
	time = 730

	potential = {
		has_city_status = yes
	}
	
	
	modification_display = {
		0 = local_freemen_output
		1 = local_freemen_desired_pop_ratio
		3 = local_serfs_output
		4 = local_population_capacity_modifier
		5 = base_resources
		
	}
	
	chance = {
		modifier = {
			total_population >= population_cap
			add = 2
		}
		
		modifier = {
			add = 
			{
				value = province_manpower_income
				multiply = {
					value = 10
				}
			}
		}
		
		modifier = {
			add = 
			{
				value = province_commerce_income
				multiply = {
					value = 1.1
				}
			}
		}
		
	}
	
}

nobility_district_building = { #trade district
	local_population_capacity_modifier = 0.01
	local_tnoble_desired_pop_ratio = 0.05
	local_tnoble_output = 0.05
	local_tax_modifier = 0.05
	
	cost = 125
	time = 730

	potential = {
		has_city_status = yes
	}
	
	
	modification_display = {
		0 = local_tnoble_output
		1 = local_tnoble_desired_pop_ratio
		2 = local_population_capacity_modifier
		3 = local_tax_modifier
		
	}
	
	chance = {
		modifier = {
			total_population >= population_cap
			add = 2
		}
		
		modifier = {
			add = 
			{
				value = province_manpower_income
				multiply = {
					value = 10
				}
			}
		}
		modifier = {
		
			num_of_tnoble <= 5
			add = 25

		}
		
	}
	
}


ironworks_building = { #ironworks
	local_freemen_output = 0.1
	local_serfs_output = 0.1
	base_resources = 0.5
	potential = {
		has_city_status = yes
	}
	
	allow = {
	trade_goods = iron
	owner = { invention = ironworks_invention }
	}
	
	cost = 100
	time = 730
	
	modification_display = {
		0 = local_freemen_output
		0 = local_serfs_output
		1 = base_resources
	}
	
	chance = {
		modifier = {
			trade_goods = iron
			add = 20
		}
	}	
}

population_building = { #Granary
	local_food_capacity = 400

	cost = 75
	time = 365

	potential = {
		has_city_status = yes
	}
	
	modification_display = {
		0 = local_food_capacity
	}

}


temple_building = {
	local_happiness_for_same_religion_modifier = 0.025
	local_pop_assimilation_speed = 0.25
	local_pop_conversion_speed = 0.25
	local_pop_promotion_speed = 0.5
	local_research_points_modifier = 0.1
	
	
	cost = 100
	time = 730

	potential = {
		has_city_status = yes
	}
	
	modification_display = {
		0 = local_happiness_for_same_religion_modifier
		1 = value_research
		2 = local_research_points_modifier
	}
	
	chance = {
		modifier = {
			add = 4
			NOT = { dominant_province_religion = owner.religion }
		}
		modifier = {
			NOT = { dominant_province_culture_group = owner.culture_group }
			add = 4
		}
	}
}

taverns_and_inns_building = {
	local_happiness_for_same_culture_modifier = 0.025
	local_freemen_happyness = 0.025
	local_serfs_happyness = 0.025
	local_commerce_value_modifier = 0.05
	
	cost = 50
	time = 730

	potential = {
		has_city_status = yes
	}
	
	modification_display = {
		0 = local_happiness_for_same_culture_modifier
		1 = value_research
		2 = local_serfs_happyness
		3 = local_commerce_value_modifier
	}
	
	chance = {
			modifier = {
			add = 
			{
				value = province_commerce_income
				multiply = {
					value = 2
				}
			}
		}
		modifier = {
			 dominant_province_culture_group = owner.culture_group 
			add = 10
		}
	}
}



barracks_building = { #Training Camp
	local_manpower_modifier = 0.15
	local_start_experience = 5
	local_cohort_recruit_speed = 0.05
	garrison_growth = 0.025
	garrison_size = 0.05

	cost = 75
	time = 365
	
	potential = {
		has_city_status = yes
	}

	modification_display = {
		0 = value_manpower
		1 = local_start_experience
		2 = local_cohort_recruit_speed
		3 = garrison_growth
		4 = garrison_size
	}
	
	chance = {
		modifier = {
			add = 
			{
				value = province_manpower_income
				multiply = {
					value = 30
				}
			}
		}
			modifier = {
			add = 
			{
				value = fort_level
				multiply = {
					value = 2
				}
			}
		}	
	}
}
#only port
shipyard_building = { #shipyard

	local_ship_recruit_speed = 0.33
	local_ship_start_experience = 10
	local_commerce_value_modifier = 0.15

	cost = 125
	time = 730
	
	potential = {
	is_port = yes
	}

	modification_display = {
		0 = local_ship_recruit_speed
		1 = local_ship_start_experience
		2 = local_commerce_value_modifier

	}
	
	chance = {
		modifier = {
		is_port = yes
			add = 30
		}	
	}
}


#city unique buildings

town_hall_building = { #Tax Office
	local_tax_modifier = 0.25
	city_monthly_state_loyalty  = 0.03
	local_output_modifier = 0.1

	cost = 200
	time = 730

	potential = {
		has_city_status = yes
	}
	allow = {
	
	NOT = { has_building = town_hall_building }
	
	}
	
	
	modification_display = {
		0 = value_income
		1 = city_monthly_state_loyalty
		2 = local_output_modifier
	}
	
	chance = {
		modifier = {
			add = 
			{
				value = province_tax_income
				multiply = {
					value = 1.5
				}
			}
			}
				modifier = {
			add = 20
			state = { 
				state_level_loyalty < 33
			}
		}	
		
	}
}

guilds_hall_building = { #Tax Office
	local_pop_promotion_speed_modifier = 0.75
	local_freemen_output = 0.2
	local_serfs_output = 0.2
	

	cost = 165
	time = 730

	potential = {
		has_city_status = yes
	}
	allow = {
	
	NOT = { has_building = guilds_hall_building }
	
	}
	
	
	modification_display = {
		0 = local_pop_promotion_speed_modifier
		1 = local_freemen_output
		2 = local_serfs_output
	}
	
	chance = {
		modifier = {
			total_population >= population_cap
			add = 2
		}
		
		modifier = {
			add = 
			{
				value = province_manpower_income
				multiply = {
					value = 10
				}
			}
		}
		
		modifier = {
			add = 
			{
				value = province_commerce_income
				multiply = {
					value = 1.1
				}
			}
		}
		
	}
}

main_market_building = { #main market
	local_commerce_value_modifier = 0.5
	local_citizen_output = 0.125
	local_citizen_happyness = 0.075
	
	cost = 175
	time = 1095

	potential = {
		has_city_status = yes
	}
	allow = {
	
	NOT = { has_building = main_market_building }
	
	}
	
	
	modification_display = {
		0 = value_income
		1 = local_commerce_value_modifier
		2 = local_citizen_output
		3 = local_citizen_happyness
	}
	
	chance = {
		modifier = {
			add = 
			{
				value = province_tax_income
				multiply = {
					value = 1.5
				}
			}	
		}
		modifier = {
			add = 20
			state = { 
				state_level_loyalty < 33
			}
		}	
	}
}

drilling_square_building = { #drilling square 
	local_start_experience = 15
	local_cohort_recruit_speed = 0.25
	garrison_growth = 0.25
	garrison_size = 0.5
	
	cost = 200
	time = 1095

	potential = {
		has_city_status = yes
	}
	allow = {
	
	NOT = { has_building = drilling_square_building }
	
	}
	
	
	modification_display = {
		0 = local_start_experience
		1 = local_cohort_recruit_speed
		2 = garrison_growth
		3 = garrison_size
	}
	
	chance = {
		modifier = {
			add = 
			{
				value = fort_level
				multiply = {
					value = 2
				}
			}
		}

	}
}

city_walls_building = { #city walls  
	local_hostile_attrition = 1
	local_defensive = 0.25
	local_population_capacity_modifier = 0.1
	supply_limit_modifier = 0.33
	
	cost = 225
	time = 1450

	potential = {
		has_city_status = yes
	}
	allow = {
	
	NOT = { has_building = city_walls_building }
	
	}
	
	
	modification_display = {
		0 = local_hostile_attrition
		1 = local_defensive
		2 = local_population_capacity_modifier
	}
	
	chance = {
		modifier = {
			add = 
			{
				value = fort_level
				multiply = {
					value = 20
				}
			}
		}

	}
}

#area unique

univeristy_building = { 
	local_research_points_modifier = 0.25
	research_points = 5
	

	potential = {
		has_city_status = yes
	}
	
	allow = {
		
		NOT = {
		
		region = { 
		any_region_province = { 
		has_owner = yes
		OR = {
		has_building = univeristy_building  
		has_building = wizard_tower_building
		has_building = aristocratic_assembly_building
		}
		} 
		}
		
		}
		
		
	}
	
	cost = 275
	time = 730
	
	modification_display = {
	0 = value_research
	}
	
	chance = {

	}
	
}

wizard_tower_building = { 
	local_research_points_modifier = 0.25
	local_tmages_output = 0.1
	local_tmages_happyness = 0.25	
	local_tmages_desired_pop_ratio = 0.25
	

	potential = {
		has_city_status = yes
	}
	
	allow = {
		
		NOT = {
		
		region = { 
		any_region_province = { 
		has_owner = yes
		OR = {
		has_building = univeristy_building  
		has_building = wizard_tower_building
		has_building = aristocratic_assembly_building
		}
		} 
		}
		
		}
		
		
	}
	
	cost = 250
	time = 730
	
	modification_display = {
	0 = value_research
	1 = local_tmages_output
	2 = local_tmages_desired_pop_ratio
	}
	
	chance = {

	}
	
}

aristocratic_assembly_building = { 
	local_research_points_modifier = 0.1
	local_taristocracy_desired_pop_ratio = 0.2
	local_cohort_recruit_speed = 0.1
	local_happiness_for_same_culture_modifier = 0.1

	potential = {
		has_city_status = yes
	}
	
	allow = {
		
		NOT = {
		
		region = { 
		any_region_province = { 
		has_owner = yes
		OR = {
		has_building = univeristy_building  
		has_building = wizard_tower_building
		has_building = aristocratic_assembly_building
		}
		} 
		}
		
		}
		
		
	}
	
	cost = 350
	time = 365
	
	modification_display = {
	0 = value_research
	1 = local_taristocracy_desired_pop_ratio
	2 = local_cohort_recruit_speed
	3 = local_happiness_for_same_culture_modifier
	}
	
	chance = {

	}
	
}
