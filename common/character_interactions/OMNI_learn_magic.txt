omniluxia_learn_magic = {
	on_other_nation = no
	on_own_nation = yes

	message = no

	sound = "event:/SFX/UI/Character/Generic/sfx_ui_character_corruption"

	potential_trigger = {
		hidden:scope:target = {
			employer = scope:actor
			is_ruler = yes
			is_alive = yes
			is_adult = yes
			NOT = { employer = { tag = REB } }
			NOT = { employer = { tag = BAR } }
		}
		scope:actor = {
			is_ai = no
			war = no
			current_ruler = {
				NOR = {
					has_trait = brain_damaged_trait
					has_trait = goblin_trait
				}
			}
			any_owned_province = {
				num_of_magic_academy_building = 1
			}
		}
		NOT = { has_variable = omni_studying_magic_cooldown }
	}

	allowed_trigger = {
		scope:target = {
			trigger_if = {
				limit = { is_adult = no }
				is_adult = yes
			}
			is_ruler = yes
			custom_tooltip = {
				text = is_omni_studying_magic_tt
				NOT = { has_variable = omni_studying_magic_cooldown }
			}
		}
	}

	effect = {
		scope:actor = {
			trigger_event = { id = me_magic_menu.1 }
		}
	}
}
