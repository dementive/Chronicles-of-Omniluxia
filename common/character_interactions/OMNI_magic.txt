omniluxia_magic = {
	on_other_nation = no
	on_own_nation = yes

	message = no

	sound = "event:/SFX/UI/Character/Generic/sfx_ui_character_corruption"

	potential_trigger = {
		hidden:scope:target = {
			employer = scope:actor
			is_ruler = yes
			is_alive = yes
			is_adult = yes
			NOT = { employer = { tag = REB } }
			NOT = { employer = { tag = BAR } }
		}
		scope:actor = {
			is_ai = no
			current_ruler = {
				OR = {
					has_trait = mage_trait
					has_trait = archmage_trait
					has_trait = warlock_trait
					has_trait = cleric_trait
					has_trait = necromancer_trait
					has_trait = lich_trait
					has_trait = druid_trait
					has_trait = elementalist_trait
					has_trait = diviner_trait
					has_trait = hierophant_trait
					has_trait = drow_trait
					has_religion = zainuddian
					has_trait = vampire_trait
					has_trait = illusionist_trait
				}
				NOR = {
					has_trait = brain_damaged_trait
					has_trait = goblin_trait
				}
			}
		}
	}

	allowed_trigger = {
		scope:target = {
			trigger_if = {
				limit = { is_adult = no }
				is_adult = yes
			}
			is_ruler = yes
			custom_tooltip = {
				text = is_omni_magic_tt
				NOT = { has_variable = omni_magic_cooldown }
			}
		}
	}

	effect = {
		scope:actor = {
			trigger_event = { id = me_zorgo_magic_focus.1 }
		}
	}
}
