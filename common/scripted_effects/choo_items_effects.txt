#add an item to a char requires item_ID has_effect yes or no effect_name

give_character_an_item = {

if = {
    limit = { 
        NOT = { 
        
            is_target_in_variable_list = {  
                name = item_list   
                target = flag:$item_ID$
                                        }  

                
            }
    }

    add_to_variable_list = {
        name = item_list
        target = flag:$item_ID$
    }
    
    custom_tooltip = character_recieved_item





}
else = {
    
    custom_tooltip = character_already_have_this_item

}



}
# removes item of a character 
remove_character_item = {
    if = {
        limit = {


            has_item = {

                item_ID = $item_ID$

            }
            

                }
        
        remove_list_variable = {
            name = item_list
            target = flag:$item_ID$
        }



    }
    else = {
        
        custom_tooltip = character_dont_have_such_item

    }

}

get_all_items_from_chosen_character = {

    limit = {
            
        has_variable_list = item_list

    }



    every_in_list = {
        variable = item_list
        
        char:$char_id$ ={

            add_to_variable_list = {
                name = all_items_of_char
                target = PREV
            }

        }   

    
    }



}




get_all_existing_items = {

    every_character = {
    
        limit = {
            
            has_variable_list = item_list


        }

        every_in_list = {
            variable = item_list
            
            ROOT ={

                add_to_global_variable_list = {
                    name = all_item_list
                    target = PREV
                }

            }   
    
        
        }




    }



}

clear_items = { 

    limit = {
            
        has_variable_list = item_list


    }
    clear_variable_list = item_list

}

remove_all_item_effect = {

}

assing_all_item_effect = {


}

transfer_all_items_to = {

clear_global_variable_list = item_transfer_list

    $transfer_from$ = {

        every_in_list = {
            variable = item_list
            
        prev = {

            add_to_global_variable_list = {
                name = item_transfer_list
                target = prev
            }

        }
        
    }
    clear_variable_list = item_list
    
}


    $transfer_to$ = {
        every_in_global_list = { 
            variable = item_transfer_list
            
            prev = {

                add_to_variable_list = {
                    name = item_list
                    target = prev
                }

            }
        
        }
    


    }


}


gift_item_pre = {

    clear_global_variable_list = transfered_item_id

    clear_variable_list = item_transfer_recipients_list

    add_to_global_variable_list = { name = transfered_item_id target = flag:$item_ID$ }  
    
    set_variable = { name = transfered_item_number value = 1 }




    

    root.country = {

        every_character = {
            limit = {
                is_adult = yes
                NOT = { root = this }
            } 
            root = {

                add_to_variable_list = {
                    name = item_transfer_recipients_list
                    target = prev
                }

            }


        }

    }
    




}



transfer_item = {

    $transfer_from$ = {
        
        remove_character_item = {  item_ID = $transfered_item$ }

    }
    $transfer_to$ = {

        give_character_an_item = {  item_ID = $transfered_item$ }

    }



}

assing_item_to_category = {

    add_to_global_variable_list = {
        name = item_$item_category$
        target = flag:$item_ID$
    }

}

assing_item_to_rarity = {

    add_to_global_variable_list = {
        name = item_$item_rarity$
        target = flag:$item_ID$
    }

}

assign_all_items_to_rarities = {

    assing_item_to_rarity = { item_rarity = unique_rarity  item_ID = item_zanis_spear }
    assing_item_to_rarity = { item_rarity = unique_rarity  item_ID = item_revenant_staff }
    assing_item_to_rarity = { item_rarity = unique_rarity  item_ID = item_axe_of_thunder }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_bow }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_elven_bow }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_crossbow }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_sword }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_axe }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_daggers }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_mace }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_lance }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_spear }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_long_axe }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_masterwork_great_sword }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_masterwork_sword }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_masterwork_bow }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_masterwork_crossbow }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_pre_catalysm_sword }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_angelic_spear }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_glorious_lance }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_groms_warhammer }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_wreath_of_joy }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_dragon_slayer_spear }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_bow_of_the_hunter }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_book_of_skills_oratory }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_book_of_skills_military }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_book_of_skills_fineese }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_book_of_skills_zeal }
    assing_item_to_rarity = { item_rarity = unique_rarity item_ID = item_veill_of_helluvos }
    assing_item_to_rarity = { item_rarity = unique_rarity item_ID = item_element_of_star }
    assing_item_to_rarity = { item_rarity = unique_rarity item_ID = item_particle_of_father_stone }
    assing_item_to_rarity = { item_rarity = rare_rarity item_ID = item_dark_arts_scripture }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_royal_banner }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_legislative_code }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_administrative_cenus }
    assing_item_to_rarity = { item_rarity = rare_rarity item_ID = item_statue_of_grom }
    assing_item_to_rarity = { item_rarity = rare_rarity item_ID = item_spirits_essence }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_holy_scripture_wishteon }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_holy_scripture_wishteon }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_ring_of_confidence }
    assing_item_to_rarity = { item_rarity = rare_rarity item_ID = item_great_contract_of_subjects_rights }
    assing_item_to_rarity = { item_rarity = uncommon_rarity item_ID = item_treaty_about_diplomatic_managment }
    assing_item_to_rarity = { item_rarity = rare_rarity item_ID = item_plans_of_grand_desing }
    assing_item_to_rarity = { item_rarity = rare_rarity item_ID = item_statuatory_treaty }
    assing_item_to_rarity = { item_rarity = rare_rarity item_ID = item_conquerors_banner }
    assing_item_to_rarity = { item_rarity = rare_rarity item_ID = item_memento_for_people }
    assing_item_to_rarity = { item_rarity = unique_rarity item_ID = item_chalice_of_victoria }
    assing_item_to_rarity = { item_rarity = unique_rarity item_ID = item_amulet_of_the_wolf }
    assing_item_to_rarity = { item_rarity = unique_rarity item_ID = item_revenant_element }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_shield }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_shield_of_father_protector }
    assing_item_to_rarity = { item_rarity = common_rarity    item_ID = item_ring_1 }
    assing_item_to_rarity = { item_rarity = common_rarity    item_ID = item_ring_2 }
    assing_item_to_rarity = { item_rarity = rare_rarity    item_ID = item_precious_gemstone }
    assing_item_to_rarity = { item_rarity = rare_rarity    item_ID = item_precious_jewelry }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_royal_emblem }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_crown }
    assing_item_to_rarity = { item_rarity = unique_rarity  item_ID = item_crown_of_zanis }
    assing_item_to_rarity = { item_rarity = rare_rarity   item_ID = item_gift_of_the_god_of_blood }
    assing_item_to_rarity = { item_rarity = unique_rarity  item_ID = item_robe_of_wielkopan }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_chainmail }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_chainmail_coif }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_plated_coat }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_grand_helmet }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_plate_armour }
    assing_item_to_rarity = { item_rarity = uncommon_rarity  item_ID = item_armet_helmet }
    assing_item_to_rarity = { item_rarity = common_rarity  item_ID = item_light_armour }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_masterwork_armour }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_masterwork_helmet }
    assing_item_to_rarity = { item_rarity = rare_rarity  item_ID = item_pre_catalysm_armour }
    assing_item_to_rarity = { item_rarity = unique_rarity  item_ID = item_balthazar_cape }

}




assign_all_items_to_categories = {

    assing_item_to_category = { item_category = weapon  item_ID = item_zanis_spear }
    assing_item_to_category = { item_category = weapon  item_ID = item_revenant_staff }
    assing_item_to_category = { item_category = weapon  item_ID = item_axe_of_thunder }
    assing_item_to_category = { item_category = weapon_ranged  item_ID = item_bow }
    assing_item_to_category = { item_category = weapon_ranged  item_ID = item_elven_bow }
    assing_item_to_category = { item_category = weapon_ranged  item_ID = item_crossbow }
    assing_item_to_category = { item_category = weapon  item_ID = item_sword }
    assing_item_to_category = { item_category = weapon  item_ID = item_axe }
    assing_item_to_category = { item_category = weapon  item_ID = item_daggers }
    assing_item_to_category = { item_category = weapon  item_ID = item_mace }
    assing_item_to_category = { item_category = weapon  item_ID = item_lance }
    assing_item_to_category = { item_category = weapon  item_ID = item_spear }
    assing_item_to_category = { item_category = weapon  item_ID = item_long_axe }
    assing_item_to_category = { item_category = weapon  item_ID = item_masterwork_great_sword }
    assing_item_to_category = { item_category = weapon  item_ID = item_masterwork_sword }
    assing_item_to_category = { item_category = weapon_ranged  item_ID = item_masterwork_bow }
    assing_item_to_category = { item_category = weapon_ranged  item_ID = item_masterwork_crossbow }
    assing_item_to_category = { item_category = weapon  item_ID = item_pre_catalysm_sword }
    assing_item_to_category = { item_category = weapon  item_ID = item_angelic_spear }
    assing_item_to_category = { item_category = weapon  item_ID = item_glorious_lance }
    assing_item_to_category = { item_category = weapon  item_ID = item_groms_warhammer }
    assing_item_to_category = { item_category = weapon  item_ID = item_wreath_of_joy }
    assing_item_to_category = { item_category = weapon  item_ID = item_dragon_slayer_spear }
    assing_item_to_category = { item_category = weapon_ranged  item_ID = item_bow_of_the_hunter }
    assing_item_to_category = { item_category = trinket item_ID = item_book_of_skills_oratory }
    assing_item_to_category = { item_category = trinket item_ID = item_book_of_skills_military }
    assing_item_to_category = { item_category = trinket item_ID = item_book_of_skills_fineese }
    assing_item_to_category = { item_category = trinket item_ID = item_book_of_skills_zeal }
    assing_item_to_category = { item_category = trinket item_ID = item_veill_of_helluvos }
    assing_item_to_category = { item_category = trinket item_ID = item_element_of_star }
    assing_item_to_category = { item_category = trinket item_ID = item_particle_of_father_stone }
    assing_item_to_category = { item_category = trinket item_ID = item_dark_arts_scripture }
    assing_item_to_category = { item_category = trinket item_ID = item_royal_banner }
    assing_item_to_category = { item_category = trinket item_ID = item_legislative_code }
    assing_item_to_category = { item_category = trinket item_ID = item_administrative_cenus }
    assing_item_to_category = { item_category = trinket item_ID = item_statue_of_grom }
    assing_item_to_category = { item_category = trinket item_ID = item_spirits_essence }
    assing_item_to_category = { item_category = trinket item_ID = item_holy_scripture_wishteon }
    assing_item_to_category = { item_category = trinket item_ID = item_holy_scripture_wishteon }
    assing_item_to_category = { item_category = trinket item_ID = item_ring_of_confidence }
    assing_item_to_category = { item_category = trinket item_ID = item_great_contract_of_subjects_rights }
    assing_item_to_category = { item_category = trinket item_ID = item_treaty_about_diplomatic_managment }
    assing_item_to_category = { item_category = trinket item_ID = item_plans_of_grand_desing }
    assing_item_to_category = { item_category = trinket item_ID = item_statuatory_treaty }
    assing_item_to_category = { item_category = trinket item_ID = item_conquerors_banner }
    assing_item_to_category = { item_category = trinket item_ID = item_memento_for_people }
    assing_item_to_category = { item_category = trinket item_ID = item_chalice_of_victoria }
    assing_item_to_category = { item_category = trinket item_ID = item_amulet_of_the_wolf }
    assing_item_to_category = { item_category = special item_ID = item_revenant_element }
    assing_item_to_category = { item_category = shield  item_ID = item_shield }
    assing_item_to_category = { item_category = shield  item_ID = item_shield_of_father_protector }
    assing_item_to_category = { item_category = ring    item_ID = item_ring_1 }
    assing_item_to_category = { item_category = ring    item_ID = item_ring_2 }
    assing_item_to_category = { item_category = ring    item_ID = item_precious_gemstone }
    assing_item_to_category = { item_category = ring    item_ID = item_precious_jewelry }
    assing_item_to_category = { item_category = emblem  item_ID = item_royal_emblem }
    assing_item_to_category = { item_category = emblem  item_ID = item_crown }
    assing_item_to_category = { item_category = emblem  item_ID = item_crown_of_zanis }
    assing_item_to_category = { item_category = curse   item_ID = item_gift_of_the_god_of_blood }
    assing_item_to_category = { item_category = armour  item_ID = item_robe_of_wielkopan }
    assing_item_to_category = { item_category = armour  item_ID = item_chainmail }
    assing_item_to_category = { item_category = helmet  item_ID = item_chainmail_coif }
    assing_item_to_category = { item_category = armour  item_ID = item_plated_coat }
    assing_item_to_category = { item_category = helmet  item_ID = item_grand_helmet }
    assing_item_to_category = { item_category = armour  item_ID = item_plate_armour }
    assing_item_to_category = { item_category = helmet  item_ID = item_armet_helmet }
    assing_item_to_category = { item_category = armour  item_ID = item_light_armour }
    assing_item_to_category = { item_category = armour  item_ID = item_masterwork_armour }
    assing_item_to_category = { item_category = helmet  item_ID = item_masterwork_helmet }
    assing_item_to_category = { item_category = armour  item_ID = item_pre_catalysm_armour }
    assing_item_to_category = { item_category = armour  item_ID = item_balthazar_cape }

}

equip_item = {

    if = {
    limit = {
        has_variable_list = equiped_item_list
        is_target_in_variable_list = { name = equiped_item_list target = flag:$item_ID$ }
        }
        remove_list_variable = {
            name = equiped_item_list
            target = flag:$item_ID$
        }
        custom_tooltip = unequiping_$item_ID$_tt
        }
        else = {
        
        custom_tooltip = equiping_$item_ID$_tt
        
        add_to_variable_list = {
            name = equiped_item_list
            target = flag:$item_ID$
        }
    }
}
##equip_item = { item_ID =  }##

equip_item_with_modifier = {
    if = {
    limit = {
        has_variable_list = equiped_item_list
        is_target_in_variable_list = { name = equiped_item_list target = flag:$item_ID$ }
        }
        remove_list_variable = {
            name = equiped_item_list
            target = flag:$item_ID$
        }
        custom_tooltip = unequiping_$item_ID$_tt

        remove_character_modifier = $item_ID$_modifier
        }
        else = {
            add_to_variable_list = {
                name = equiped_item_list
                target = flag:$item_ID$
            }
        custom_tooltip = equiping_$item_ID$_tt
        add_character_modifier = { name = $item_ID$_modifier  duration = -1   }
    }

}




