## All Bloodline passdown effects are in this file and this file only.
## Each new bloodline has to be added to the bloodline_on_born_effect and bloodline_setup_effect scripted effects

bloodline_on_born_effect = {
    pass_down_bloodline_character_effect = { BLOODLINE = "zani"}
    pass_down_bloodline_character_effect = { BLOODLINE = "aspatta"}
    pass_down_bloodline_character_effect = { BLOODLINE = "duggmoggen"}
    pass_down_bloodline_character_effect = { BLOODLINE = "sertem"}
    pass_down_bloodline_character_effect = { BLOODLINE = "dune"}
    pass_down_bloodline_character_effect = { BLOODLINE = "edis"}
    pass_down_bloodline_character_effect = { BLOODLINE = "cyrogelos"}
    pass_down_bloodline_character_effect = { BLOODLINE = "aralans"}
} 

bloodline_setup_effect = {
    ##OG Bloodlines
    pass_down_bloodline_effect = { BLOODLINE = "zani"}
    pass_down_bloodline_effect = { BLOODLINE = "aspatta"}
    pass_down_bloodline_effect = { BLOODLINE = "duggmoggen"}
    pass_down_bloodline_effect = { BLOODLINE = "sertem"}
    pass_down_bloodline_effect = { BLOODLINE = "dune"}
    pass_down_bloodline_effect = { BLOODLINE = "edis"}
    pass_down_bloodline_effect = { BLOODLINE = "cyrogelos"}
    pass_down_bloodline_effect = { BLOODLINE = "aralans"}
}

bloodline_game_start_effects = {
    add_bloodline_setup_effect = { BLOODLINE = zani CHAR = c:WGA.current_ruler }
    add_bloodline_setup_effect = { BLOODLINE = zani CHAR = c:EGA.current_ruler }
    add_bloodline_setup_effect = { BLOODLINE = aspatta CHAR = char:90 }
    add_bloodline_setup_effect = { BLOODLINE = sertem CHAR = char:0 }
    add_bloodline_setup_effect = { BLOODLINE = dune CHAR = char:9 }
    add_bloodline_setup_effect = { BLOODLINE = edis CHAR = char:93 }
    add_bloodline_setup_effect = { BLOODLINE = cyrogelos CHAR = char:94 }
    add_bloodline_setup_effect = { BLOODLINE = aralans CHAR = char:13 }
    hidden_effect = {
        trigger_event = { id = bloodlines_setup_completion.1 }
    }
}

add_bloodline_setup_effect = {
    every_character = {
        limit = {
            has_same_family = $CHAR$
        }
        force_add_trait = $BLOODLINE$
    }
}

##Bloodline legitimacy scheme effect.
add_bloodline_effect = {
    add_trait = $BLOODLINE$
    if = {
        limit = {
            num_of_children > 0
        }
        every_child = {
            limit = { is_alive = yes }
            add_trait = $BLOODLINE$
            if = {
                limit = { num_of_children > 0 }
                every_child = {
                    limit = { is_alive = yes }
                    add_trait = $BLOODLINE$
                }
            }
        }
    }
}

pass_down_bloodline_effect = {
    every_character = {
        if = {
            limit = {
                exists = father
                father = {
                    has_trait = $BLOODLINE$
                }                
                NOT = {
                    has_trait = $BLOODLINE$
                }
            }
            force_add_trait = $BLOODLINE$
        }
        if = {
            limit = {
                exists = mother
                mother = {
                    has_trait = $BLOODLINE$
                }
                NOT = {
                    has_trait = $BLOODLINE$
                }
            }
            force_add_trait = $BLOODLINE$
        }
    }
}

# Same as above but for an individual character
pass_down_bloodline_character_effect = {
    if = {
        limit = {
            exists = father
            father = {
                has_trait = $BLOODLINE$
            }                
            NOT = {
                has_trait = $BLOODLINE$
            }
        }
        force_add_trait = $BLOODLINE$
    }
    if = {
        limit = {
            exists = mother
            mother = {
                has_trait = $BLOODLINE$
            }
            NOT = {
                has_trait = $BLOODLINE$
            }
        }
        force_add_trait = $BLOODLINE$
    }
}
