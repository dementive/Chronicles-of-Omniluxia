omni_yearly_country_effect = {
	disable_racial_assimilation = yes
}

choo_on_game_init_effects = {
	every_character = {
		set_racial_trait_effect = yes
	}
	bloodline_game_start_effects = yes
	disable_racial_assimilation = yes
	magic_game_start_effects = yes
}

disable_racial_assimilation_macro = {
	if = {
		limit = {
			NOR = {
				$COUNTRY_LIMIT$
			}
		}
		every_country_culture = {
			limit = {
				NOT = {
					has_country_culture_modifier = disable_cultural_assimilation
				}
				OR = {
					$CULTURE_LIMIT$
				}
			}
			add_country_culture_modifier = {
				name = disable_cultural_assimilation
				duration = -1
			}
		}
	}
}

disable_racial_assimilation_for_humans = {
	# Humans have way more culture groups than anyone else so just checking every_country_culture that is not a special race is easier to setup here than listing 50 culture groups.
	if = {
		limit = {
			OR = {
				country_culture_group = werhenssian
				country_culture_group = forest_elves
				country_culture_group = morrigon_forest_elves
				country_culture_group = southern_forest_elves
				country_culture_group = western_half_elves
				country_culture_group = high_half_elves
				country_culture_group = high_elves
				country_culture_group = orcish
				country_culture_group = common_dwarves
				country_culture_group = gold_dwarves
				country_culture_group = silver_dwarves
				country_culture_group = austropetolian
				country_culture_group = snakefolk
				country_culture_group = goblin
				country_culture_group = hobgoblin
				country_culture_group = dragkhanic
				country_culture_group = dragkhanic_eastern
				country_culture_group = dragkhanic_western
				country_culture_group = drow
				country_culture_group = sea_elves
				country_culture_group = yedidyah
				country_culture_group = kinones
				country_culture_group = gnome
				country_culture_group = deep_gnome
				country_culture_group = halfling
				country_culture_group = silver_halfling
				country_culture_group = dissolved
				country_culture_group = dissolved_revant
				country_culture_group = zorg
			}
		}
		every_country_culture = {
			limit = {
				NOT = {
					has_country_culture_modifier = disable_cultural_assimilation
				}
				NOR = {
					this.culture.culture_group = culture_group:werhenssian
					this.culture.culture_group = culture_group:forest_elves
					this.culture.culture_group = culture_group:morrigon_forest_elves
					this.culture.culture_group = culture_group:southern_forest_elves
					this.culture.culture_group = culture_group:western_half_elves
					this.culture.culture_group = culture_group:high_half_elves
					this.culture.culture_group = culture_group:high_elves
					this.culture.culture_group = culture_group:orcish
					this.culture.culture_group = culture_group:common_dwarves
					this.culture.culture_group = culture_group:gold_dwarves
					this.culture.culture_group = culture_group:silver_dwarves
					this.culture.culture_group = culture_group:austropetolian
					this.culture.culture_group = culture_group:snakefolk
					this.culture.culture_group = culture_group:goblin
					this.culture.culture_group = culture_group:hobgoblin
					this.culture.culture_group = culture_group:dragkhanic
					this.culture.culture_group = culture_group: = dragkhanic_eastern
					this.culture.culture_group = culture_group: = dragkhanic_western
					this.culture.culture_group = culture_group:drow
					this.culture.culture_group = culture_group:sea_elves
					this.culture.culture_group = culture_group:yedidyah
					this.culture.culture_group = culture_group:kinones
					this.culture.culture_group = culture_group:gnome
					this.culture.culture_group = culture_group:deep_gnome
					this.culture.culture_group = culture_group:halfling
					this.culture.culture_group = culture_group:silver_halfling
					this.culture.culture_group = culture_group:dissolved
					this.culture.culture_group = culture_group:dissolved_revant
					this.culture.culture_group = culture_group:zorg
				}
			}
			add_country_culture_modifier = {
				name = disable_cultural_assimilation
				duration = -1
			}
		}
	}
}

disable_racial_assimilation = {
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = forest_elves country_culture_group = morrigon_forest_elves country_culture_group = southern_forest_elves country_culture_group = sunset_elves"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:forest_elves this.culture.culture_group = culture_group:morrigon_forest_elves this.culture.culture_group = culture_group:southern_forest_elves this.culture.culture_group = culture_group:sunset_elves"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = western_half_elves country_culture_group = high_half_elves country_culture_group = werhenssian"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:western_half_elves this.culture.culture_group = culture_group:high_half_elves this.culture.culture_group = culture_group:werhenssian"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = kinones"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:kinones"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = high_elves"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:high_elves"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = orcish"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:orcish"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = common_dwarves"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:common_dwarves"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = gold_dwarves"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:gold_dwarves"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = silver_dwarves"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:silver_dwarves"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = austropetolian country_culture_group = snakefolk"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:austropetolian this.culture.culture_group = culture_group:snakefolk"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = goblin"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:goblin"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = hobgoblin"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:hobgoblin"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = dragkhanic country_culture_group =  dragkhanic_eastern country_culture_group = dragkhanic_western"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:dragkhanic this.culture.culture_group = culture_group:dragkhanic_eastern this.culture.culture_group = culture_group:dragkhanic_western"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = drow"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:drow"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = sea_elves"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:sea_elves"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = yedidyah"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:yedidyah"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = gnome"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:gnome"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = deep_gnome"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:deep_gnome"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = halfling"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:halfling"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = silver_halfling"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:silver_halfling"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = dissolved country_culture_group = dissolved_revant"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:dissolved this.culture.culture_group = culture_group:dissolved_revant"
	}
	disable_racial_assimilation_macro = {
		COUNTRY_LIMIT = "country_culture_group = zorg"
		CULTURE_LIMIT = "this.culture.culture_group = culture_group:zorg"
	}
	disable_racial_assimilation_for_humans = yes
}

set_racial_trait_effect = {
	if = {
		limit = {
			NOR = {
				has_trait = forest_elf_trait
				has_trait = high_elf_trait
				has_trait = orc_trait
				has_trait = gold_dwarf_trait
				has_trait = copper_dwarf_trait
				has_trait = silver_dwarf_trait
				has_trait = snakefolk_trait
				has_trait = human_trait
				has_trait = goblin_trait
				has_trait = hobgoblin_trait
				has_trait = drow_trait
				has_trait = wraith_trait
				has_trait = zorg_trait
				has_trait = half_elf_trait
				has_trait = silver_halfling_trait
				has_trait = halfling_trait
				has_trait = gnome_trait
				has_trait = deep_gnome_trait
				has_trait = sea_elf_trait
				has_trait = kinones
			}
		}
		if = {
			limit = {
				OR = {
					has_culture_group = forest_elves
					has_culture_group = morrigon_forest_elves
					has_culture_group = southern_forest_elves
				}
			}
			add_trait = forest_elf_trait
		}
		else_if = {
			limit = {
				OR = {
					has_culture_group = western_half_elves
					has_culture_group = werhenssian
					has_culture_group = high_half_elves
				}
			}
			add_trait = half_elf_trait
		}
		else_if = {
			limit = {
				has_culture_group = high_elves
			}
			add_trait = high_elf_trait
		}
		else_if = {
			limit = {
				has_culture_group = orcish
			}
			add_trait = orc_trait
		}
		else_if = {
			limit = {
				has_culture_group = common_dwarves
			}
			add_trait = copper_dwarf_trait
		}
		else_if = {
			limit = {
				has_culture_group = gold_dwarves
			}
			add_trait = gold_dwarf_trait
		}
		else_if = {
			limit = {
				has_culture_group = silver_dwarves
			}
			add_trait = silver_dwarf_trait
		}
		else_if = {
			limit = {
				OR = {
					has_culture_group = austropetolian
					has_culture_group = snakefolk
				}
			}
			add_trait = snakefolk_trait
		}
		else_if = {
			limit = {
				has_culture_group = kinones
			}
			add_trait = kinones_trait
		}
		else_if = {
			limit = {
				has_culture_group = goblin
			}
			add_trait = goblin_trait
		}
		else_if = {
			limit = {
				has_culture_group = hobgoblin
			}
			add_trait = hobgoblin_trait
		}
		else_if = {
			limit = {
				OR = {
					has_culture_group = dragkhanic
					has_culture_group = dragkhanic_eastern
					has_culture_group = dragkhanic_western
				}
			}
			add_trait = dragkhanic_trait
		}
		else_if = {
			limit = {
				has_culture_group = drow
			}
			add_trait = drow_trait
		}
		else_if = {
			limit = {
				has_culture_group = sea_elves
			}
			add_trait = sea_elf_trait
		}
		else_if = {
			limit = {
				has_culture_group = yedidyah
			}
			add_trait = vampire_trait
		}
		else_if = {
			limit = {
				has_culture_group = gnome
			}
			add_trait = gnome_trait
		}
		else_if = {
			limit = {
				has_culture_group = deep_gnome
			}
			add_trait = deep_gnome_trait
		}
		else_if = {
			limit = {
				has_culture_group = halfling
			}
			add_trait = halfling_trait
		}
		else_if = {
			limit = {
				has_culture_group = silver_halfling
			}
			add_trait = silver_halfling_trait
		}
		else_if = {
			limit = {
				OR = {
					has_culture_group = dissolved
					has_culture_group = dissolved_revant
				}
			}
			add_trait = wraith_trait
		}
		else_if = {
			limit = {
				has_culture_group = zorg
			}
			add_trait = zorg_trait
		}
		else = {
			add_trait = human_trait
		}
	}
}