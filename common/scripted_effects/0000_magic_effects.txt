magic_monthly_effects = {
	if = {
		limit = {
			NOT = { has_global_variable = magic_monthly_done }
		}
		change_magic_vars = yes
	}
	set_global_variable = magic_monthly_done
	trigger_event = {
		id = magic.1
		days = 2
	}
}

magic_game_start_effects = {
	if = {
		limit = {
			NOT = { has_global_variable = magic_setup_done }
		}
		set_magic_vars = yes
	}
	set_global_variable = magic_setup_done
	trigger_event = {
		id = magic.2
		days = 1
	}
}

set_magic_vars = {
	every_country = {
		if = {
			limit = {
				NOT = { has_variable = magic }
			}
			set_variable = {
				name = magic
				value = 0
			}
		}
	}
	every_province = {
		limit = {
			is_sea = no
			is_inhabitable = yes
		}
		if = {
			limit = {
				NOT = { has_variable = magic }
			}
			set_variable = {
				name = magic
				value = 0
			}
		}
	}
	every_living_character = {
		if = {
			limit = {
				NOT = { has_variable = magic }
			}
			set_variable = {
				name = magic
				value = 0
			}
		}
	}
}

change_magic_vars = {
	set_magic_vars = yes
	every_country = {
		switch = {
			trigger = has_country_modifier
			country_magic_1 = {
				change_variable = {
					name = magic
					add = 1
				}
			}
			country_magic_2 = {
				change_variable = {
					name = magic
					add = 2
				}
			}
			country_magic_3 = {
				change_variable = {
					name = magic
					add = 3
				}
			}
			country_magic_4 = {
				change_variable = {
					name = magic
					add = 4
				}
			}
		}
	}
	every_province = {
		limit = {
			is_sea = no
			is_inhabitable = yes
		}
		switch = {
			trigger = has_province_modifier
			province_magic_1 = {
				change_variable = {
					name = magic
					add = 1
				}
			}
			province_magic_2 = {
				change_variable = {
					name = magic
					add = 2
				}
			}
			province_magic_3 = {
				change_variable = {
					name = magic
					add = 3
				}
			}
			province_magic_4 = {
				change_variable = {
					name = magic
					add = 4
				}
			}
		}
	}
	every_living_character = {
		switch = {
			trigger = has_character_modifier
			chararacter_magic_1 = {
				change_variable = {
					name = magic
					add = 1
				}
			}
			chararacter_magic_2 = {
				change_variable = {
					name = magic
					add = 2
				}
			}
			chararacter_magic_3 = {
				change_variable = {
					name = magic
					add = 3
				}
			}
			chararacter_magic_4 = {
				change_variable = {
					name = magic
					add = 4
				}
			}
		}
	}
}