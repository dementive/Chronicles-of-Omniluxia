namespace = me_cymeva

# National Identity
me_cymeva.1 = {
    type = country_event

    title = me_cymeva_1_title
    desc = me_cymeva_1_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_cymeva_1.a"
        custom_tooltip = me_cymeva_1_tooltip.a
        add_stability = 5
        add_country_modifier = {
            name = atheusian_dominant_mod
            duration = 3652
        }
    }

    option = {
        name = "me_cymeva_1.b"
        custom_tooltip = me_cymeva_1_tooltip.b

        ai_chance = { factor = 10 }

        add_political_influence = 25
        add_country_modifier = {
            name = cymevan_dominant_mod
            duration = 3652
        }
        hidden_effect = {
            every_owned_province = {
                while = {
                    count = 1000
                    every_pops_in_province = {
                        limit = {
                            culture = root.culture
                        }
                        set_pop_culture = cymevan
                    }
                }
            }
            every_character = {
                limit = {
                    AND = {
                        OR = {
                            from_ruler_family = yes
                            is_minor_character = no
                        }
                        has_culture = root.culture
                    }
                }
                set_culture = cymevan
            }
            set_primary_culture_cleanup_effect = {
                NEW_PRIMARY_CULTURE = cymevan
                MAKE_OLD_CULTURE_INTEGRATED = yes
            }
        }
    }
}

# Cymeva Ends the Peace
me_cymeva.2 = {
    type = country_event

    title = me_cymeva_2_title
    desc = me_cymeva_2_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:ATH.current_ruler

    fire_only_once = yes

    option = {
        name = "me_cymeva_2.a"
        custom_tooltip = me_cymeva_2_tooltip
        hidden_effect = {
            c:ACY = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 142
                    target = ATH
                }
            }
            # Atheusian Response
            c:ATH = {
                trigger_event = { id = me_cymeva.3 }
            }
            # Horteonian Claims
            every_country = {
                limit = {
                    country_culture_group = horteonian
                    NOT = {
                        is_subject_type = feudatory
                    }
                }
                trigger_event = {
                    id = me_cymeva.7
                    days = { 15 30 }
                }
            }
            # All Countries
            every_country = {
                limit = {        
                    NOT = {
                        OR = {
                            country_culture_group = horteonian
                            tag = ACY
                            tag = ATH
                            tag = HE4
                            tag = HE5
                            tag = HE6
                            tag = HE7
                        }
                    }
                }
                trigger_event = {
                    id = me_cymeva.6
                    days = { 15 30 }
                }
            }
        }
    }
}

# Atheus Attacked
me_cymeva.3 = {
    type = country_event

    title = me_cymeva_3_title
    desc = me_cymeva_3_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:ACY.current_ruler

    fire_only_once = yes

    option = {
        name = "me_cymeva_3.a"
        custom_tooltip = me_cymeva_3_tooltip
        hidden_effect = {
            # Colony Call to Arms
            c:HE4 = {
                trigger_event = { id = me_cymeva.4 }
            }
            c:HE5 = {
                trigger_event = { id = me_cymeva.4 }
            }
            c:HE6 = {
                trigger_event = { id = me_cymeva.4 }
            }
            c:HE7 = {
                trigger_event = { id = me_cymeva.4 }
            }
        }
    }
}

# Call to Arms
me_cymeva.4 = {
    type = country_event

    title = me_cymeva_4_title
    desc = me_cymeva_4_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:ACY.current_ruler
    right_portrait = c:ATH.current_ruler

    fire_only_once = yes

    immediate = {
        save_scope_as = horteonic_subject
    }

    option = {
        name = "me_cymeva_4.a"
        custom_tooltip = me_cymeva_4_tooltip.a
        hidden_effect = {
            scope:horteonic_subject = {
                declare_war_with_wargoal = {
                    war_goal = independence_wargoal
                    province = ROOT.capital_scope
                    target = ACY
                }
            }
        }
        c:ACY = {
            trigger_event = { id = me_cymeva.5 }
        }
    }
    option = {
        name = "me_cymeva_4.b"
        custom_tooltip = me_cymeva_4_tooltip.b
        add_manpower = -1
        add_treasury = -50
    }
}

# Rejection
me_cymeva.5 = {
    type = country_event

    title = me_cymeva_5_title
    desc = me_cymeva_5_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = scope:horteonic_subject.current_ruler

    fire_only_once = yes

    option = {
        name = "me_cymeva_5.a"
        custom_tooltip = me_cymeva_5_tooltip
    }
}

# World Announcement Great High Elven Civil War Continues
me_cymeva.6 = {
    type = country_event

    title = me_cymeva_6_title
    desc = me_cymeva_6_desc
    picture = army_desert
    left_portrait = c:ATH.current_ruler
    right_portrait = c:ACY.current_ruler

    fire_only_once = yes

    option = {
        name = "me_cymeva_6.a"
        custom_tooltip = me_cymeva_6_tooltip
    }
}

# Horteonians Decide What to Do
me_cymeva.7 = {
    type = country_event

    title = me_cymeva_7_title
    desc = me_cymeva_7_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:ACY.current_ruler

    fire_only_once = yes

    option = {
        name = "me_cymeva_7.a"
        custom_tooltip = me_cymeva_7_tooltip
        hidden_effect = {
            mission_claim_region_effect = { REGION = horteon_western_region }
            mission_claim_region_effect = { REGION = horteon_shout_region }
        }
    }
}

# Slave Estates
me_cymeva.8 = {
    type = country_event

    title = me_cymeva_8_title
    desc = me_cymeva_8_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_cymeva_8.a"
        custom_tooltip = me_cymeva_8_tooltip
        custom_tooltip = cymeva_stooltip2
        hidden_effect = {
            p:310 = {
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
            }
            p:343 = {
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
            }
            p:321 = {
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
            }
            p:294 = {
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
            }
        }
    }
}

# Gem City
me_cymeva.9 = {
    type = country_event

    title = me_cymeva_9_title
    desc = me_cymeva_9_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_cymeva_9.a"
        custom_tooltip = me_cymeva_9_tooltip
        create_country_treasure = {
            key = "treasure_atheusian_gem"
            icon = "treasure_chest"
            modifier = {
                local_nobles_happyness = 0.1
                local_monthly_civilization = 0.05
            }
        }
        show_as_tooltip = {
            p:345 = {
                add_permanent_province_modifier = {
                    name = gem_city_mod
                    duration = -1
                }
            }
            add_treasury = -150
        }

    }
}

# First City
me_cymeva.10 = {
    type = country_event

    title = me_cymeva_10_title
    desc = me_cymeva_10_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_cymeva_10.a"
        custom_tooltip = me_cymeva_10_tooltip
        show_as_tooltip = {
            p:345 = {
                add_permanent_province_modifier = {
                    name = cy_first_city_mod
                    duration = -1
                }
                define_pop = {
                    type = nobles
                    culture = cymevan
                    religion = transcendence_enlighten
                }
                define_pop = {
                    type = nobles
                    culture = cymevan
                    religion = transcendence_enlighten
                }
                define_pop = {
                    type = slaves
                    culture = mazran
                    religion = hortenic_pantheon
                }
            }
        }
        current_ruler = {
            good_zeal_effect = yes
            add_finesse = 1
            add_popularity = 15
        }
    }
}

# Great Slaver Navy
me_cymeva.11 = {
    type = country_event

    title = me_cymeva_11_title
    desc = me_cymeva_11_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_cymeva_11.a"
        custom_tooltip = me_cymeva_11_tooltip
        show_as_tooltip = {
            add_country_modifier = {
                name = slaver_navy_mod
                duration = 3652
            }
        }
    }
}

# Annex Colonies
me_cymeva.12 = {
    type = country_event

    title = me_cymeva_12_title
    desc = me_cymeva_12_desc
    picture = army_desert
    left_portrait = current_ruler
    left_portrait = c:HE7.current_ruler
    right_portrait = c:HE5.current_ruler
    right_portrait = c:HE4.current_ruler

    option = {
        name = "me_cymeva_12.a"
        custom_tooltip = me_cymeva_12_tooltip
        custom_tooltip = cymeva_stooltip3
        custom_tooltip = cymeva_stooltip4

        hidden_effect = {
            C:HE7 = { every_owned_province = { set_owned_by = ACY } }
            C:HE6 = { every_owned_province = { set_owned_by = ACY } }
            C:HE5 = { every_owned_province = { set_owned_by = ACY } }
            C:HE4 = { every_owned_province = { set_owned_by = ACY } }
        }
    }
}

# Take Eptelon
me_cymeva.13 = {
    type = country_event

    title = me_cymeva_13_title
    desc = me_cymeva_13_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_cymeva_13.a"
        custom_tooltip = me_cymeva_13_tooltip
        custom_tooltip = cymeva_stooltip5
        custom_tooltip = cymeva_stooltip6
        current_ruler = {
            add_martial = 1
            force_add_trait = conquerer
            add_popularity = 15
        }

        hidden_effect = {
            p:345 = {
                define_pop = {
                    type = slaves
                    culture = edertanian
                    religion = eptelon_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = dagaison
                    religion = eptelon_pantheon
                }
            }
            p:360 = {
                define_pop = {
                    type = slaves
                    culture = ghergian
                    religion = eptelon_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = tolesucani
                    religion = eptelon_pantheon
                }
            }
            p:287 = {
                define_pop = {
                    type = slaves
                    culture = kuazien
                    religion = eptelon_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = suru
                    religion = eptelon_pantheon
                }
            }
        }
    }
}

# Take the North
me_cymeva.14 = {
    type = country_event

    title = me_cymeva_14_title
    desc = me_cymeva_14_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_cymeva_14.a"
        custom_tooltip = me_cymeva_14_tooltip
        custom_tooltip = cymeva_stooltip8
        current_ruler = {
            add_charisma = 1
            good_martial_effect = yes
            add_popularity = 15
        }

        hidden_effect = {
            p:345 = {
                define_pop = {
                    type = slaves
                    culture = papami
                    religion = hortenic_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = avetarani
                    religion = hortenic_pantheon
                }
            }
            p:360 = {
                define_pop = {
                    type = slaves
                    culture = papami
                    religion = hortenic_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = avetarani
                    religion = hortenic_pantheon
                }
            }
            p:287 = {
                define_pop = {
                    type = slaves
                    culture = papami
                    religion = hortenic_pantheon
                }
                define_pop = {
                    type = slaves
                    culture = avetarani
                    religion = hortenic_pantheon
                }
            }
        }
    }
}

# Eastern Capital
me_cymeva.15 = {
    type = country_event

    title = me_cymeva_15_title
    desc = me_cymeva_15_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_cymeva_15.a"
        custom_tooltip = me_cymeva_15_tooltip
        show_as_tooltip = {
            add_political_influence = 25
            p:264 = {
                add_permanent_province_modifier = {
                    name = cy_eastern_city_mod
                    duration = -1
                }
                state = { set_state_capital = p:264 }
            }
        }
        custom_tooltip = cymeva_stooltip9
        current_ruler = {
            add_finesse = 1
            add_popularity = 15
        }
    }
}




