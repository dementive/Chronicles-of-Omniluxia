namespace = me_dune

me_dune.1 = {
    type = country_event

    title = me_dune_1_title
    desc = me_dune_1_desc
    picture = egypt5
    left_portrait = current_ruler

    option = {
        name = "me_dune_1.a"
        custom_tooltip = me_dune_1_tooltip.a
        add_country_modifier = {
            name = senedejr_mod
            duration = 3652
        }
        hidden_effect = {
            create_unit = {
                navy = no
                name = "Senedejr's Faithful"
                location = capital_scope
                hidden_effect = {
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = heavy_infantry
                    add_subunit = light_cavalry  
                    add_subunit = light_cavalry
                    add_subunit = camels  
                    add_subunit = camels 
                    add_subunit = supply_train                                        
                    add_food = 150
                    add_morale = 3
                }
            }
        }
    }

    option = {
        name = "me_dune_1.b"
        custom_tooltip = me_dune_1_tooltip.b
        add_country_modifier = {
            name = khewer_mod
            duration = 3652
        }
        hidden_effect = {
            create_unit = {
                navy = no
                name = "Khewer's Liberators"
                location = capital_scope
                hidden_effect = {
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = heavy_infantry
                    add_subunit = light_cavalry  
                    add_subunit = light_cavalry
                    add_subunit = camels  
                    add_subunit = camels 
                    add_subunit = supply_train                                        
                    add_food = 150
                    add_morale = 3
                }
            }
        }
    }
}

# Dune attacks the Sertem
me_dune.2 = {
    type = country_event

    title = me_dune_2_title
    desc = me_dune_2_desc
    picture = event_desert_castle
    left_portrait = current_ruler
    left_portrait = c:AGE.current_ruler
    right_portrait = p:3419.state.governor_or_ruler


    fire_only_once = yes

    option = {
        name = "me_dune_2.a"
        custom_tooltip = me_dune_2_tooltip
        hidden_effect = {
            c:AGE = {
                trigger_event = { id = me_dune.3 }
            }
        }
    }
}

# Agaetep Unification and Reaction
me_dune.3 = {
    type = country_event

    title = me_dune_3_title
    desc = me_dune_3_desc
    picture = army_desert
    left_portrait = current_ruler
    left_portrait = c:AKH.current_ruler
    left_portrait = c:PTH.current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:EGY.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_3.a"
        custom_tooltip = me_dune_3_tooltip
        c:AGE = {
            make_subject = {
                target = PTH
                type = feudatory
            }
        }
        c:AGE = {
            make_subject = {
                target = AKH
                type = feudatory
            }
        }
        hidden_effect = {
            p:3419.owner = {
                trigger_event = { id = me_dune.4 }
            }
            create_unit = {
                navy = no
                name = "Upper Baetepian Allies"
                location = capital_scope
                hidden_effect = {
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = heavy_infantry
                    add_subunit = light_cavalry  
                    add_subunit = light_cavalry
                    add_subunit = camels  
                    add_subunit = camels 
                    add_subunit = supply_train                                        
                    add_food = 150
                    add_morale = 3
                }
            }
        }
    }
}

# Baetep Recieves News of Dune's Attack
me_dune.4 = {
    type = country_event

    title = me_dune_4_title
    desc = me_dune_4_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_4.a"
        custom_tooltip = me_dune_4_tooltip
        hidden_effect = {
            c:DUN = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 3419
                    target = p:3419.owner
                }
            }
            c:AGE = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 3466
                    target = p:3466.owner
                }
            }    
            # GLOBAL ANNOUNCEMENT
            every_country = {
                limit = {
                    NOT = {
                        OR = {
                            tag = EGY
                            country_culture_group = beatepian_upper
                        }
                    }
                }
                trigger_event = me_dune.5
            }
            # Razani Intervention
            c:EGA = {
                trigger_event = {
                    id = me_dune.6
                    days = { 30 90 }
                }
            }
        }
    }
}

# WORLD ANNOUNCEMENT WAR OF THE POMEGRANATE THRONE
me_dune.5 = {
    type = country_event

    title = me_dune_5_title
    desc = me_dune_5_desc
    picture = egypt4
    left_portrait = c:EGY.current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_5.a"
        custom_tooltip = me_dune_5_tooltip
    }
}

# Razani Intervention Decision
me_dune.6 = {
    type = country_event

    title = me_dune_6_title
    desc = me_dune_6_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:EGY.current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_6.a"
        custom_tooltip = me_dune_6_tooltip.a
        hidden_effect = {
            c:EGA = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 2672
                    target = EGY
                }
            }
            c:EGY = {
                trigger_event = { id = me_dune.7 }
            }
        }
    }

    option = {
        name = "me_dune_6.b"
        custom_tooltip = me_dune_6_tooltip.b
        add_stability = 3
        add_tyranny = 5
        hidden_effect = {
            c:KDM = {
                trigger_event = {
                    id = me_dune.8
                    days = { 30 90 }
                }
            }
        }
    }
}

# Baetep Recieves News of Razani Intervention
me_dune.7 = {
    type = country_event

    title = me_dune_7_title
    desc = me_dune_7_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:EGA.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_7.a"
        custom_tooltip = me_dune_7_tooltip
        hidden_effect = {
            c:KDM = {
                trigger_event = {
                    id = me_dune.8
                    days = { 30 90 }
                }
            }
        }
    }
}

# Golden Crusaders Intervention
me_dune.8 = {
    type = country_event

    title = me_dune_8_title
    desc = me_dune_8_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:EGY.current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_8.a"
        custom_tooltip = me_dune_8_tooltip.a
        hidden_effect = {
            c:KDM = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 3388
                    target = EGY
                }
            }
            c:EGY = {
                trigger_event = { id = me_dune.9 }
            }
        }
    }

    option = {
        name = "me_dune_8.b"
        custom_tooltip = me_dune_8_tooltip.b
        add_stability = 3
        add_tyranny = 5
    }
}

# Baetep Recieves News of Golden Crusaders Intervention
me_dune.9 = {
    type = country_event

    title = me_dune_9_title
    desc = me_dune_9_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:KDM.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_9.a"
        custom_tooltip = me_dune_9_tooltip
    }
}

me_dune.10 = {
    type = country_event

    title = me_dune_10_title
    desc = me_dune_10_desc
    picture = egypt9
    left_portrait = current_ruler
    right_portrait = c:EGY.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_10.a"
        custom_tooltip = me_dune_10_tooltip
        show_as_tooltip = {
            add_stability = 5
            add_military_experience = 10
        }
    }
}

me_dune.11 = {
    type = country_event

    title = me_dune_11_title
    desc = me_dune_11_desc
    picture = egypt8
    left_portrait = current_ruler
    right_portrait = c:BEL.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_11.a"
        random_country_culture = {
            limit = {
                OR = {
                    is_culture = pileseri
                    is_culture = azari
                    is_culture = gezari
                    is_culture = yamhadi
                }
                NOT = {
                    has_pop_type_right = citizen
                }
            }
            set_country_culture_right = citizen
        }
        c:DUN = {
            make_subject = {
                target = c:BEL
                type = client_state
            }
        }
        custom_tooltip = me_dune_11_tooltip
    }
    option = {
        name = "me_dune_11.b"
        add_treasury = -50
        create_unit = {
            navy = no
            name = "Bel-bani Raiders"
            location = p:3986
            hidden_effect = {
            add_subunit = light_infantry
            add_subunit = light_infantry
            add_subunit = light_cavalry
            add_subunit = light_cavalry                                          
            add_food = 100
            add_morale = 2
            }
        }
        custom_tooltip = me_dune_11_tooltip
    }
    option = {
        name = "me_dune_11.c"
        add_treasury = -50
        add_country_modifier = {
            name = belbani_raiders_mod
            duration = 1825
        }
        custom_tooltip = me_dune_11_tooltip
    }
    option = {
        name = "me_dune_11.d"
        reverse_add_opinion = { target = BEL modifier = opinion_insult }
        custom_tooltip = me_dune_11_tooltip
    }
}

me_dune.12 = {
    type = country_event

    title = me_dune_12_title
    desc = me_dune_12_desc
    picture = egypt1
    left_portrait = current_ruler
    right_portrait = c:EGY.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_12.a"
        custom_tooltip = me_dune_12_tooltip
        current_ruler = {
            force_add_trait = Pharon
        }
        show_as_tooltip = {
            set_capital = 2805
            change_country_name = "Baetep"
            add_5_free_province_investments = yes
            capital_scope = {
                capital_formable_large_effect = yes
                formable_capital_modifier_large_effect = yes
            }
            add_country_modifier = {
                name = formable_country_huge_modifier
                duration = 7600
            }
        }
    }
}

me_dune.13 = {
    type = country_event

    title = me_dune_13_title
    desc = me_dune_13_desc
    picture = event_marching_army
    left_portrait = current_ruler
    right_portrait = p:2805.state.governor_or_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_13.a"
        custom_tooltip = me_dune_13_tooltip
        show_as_tooltip = {
            current_ruler = {
                good_zeal_effect = yes
                add_popularity = 5
            }
            add_country_modifier = {
                name = dune_slavers_mod
                duration = 7300
            }
        }
    }
}

me_dune.14 = {
    type = country_event

    title = me_dune_14_title
    desc = me_dune_14_desc
    picture = event_desert_castle
    left_portrait = current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_14.a"
        set_capital = 2672
        custom_tooltip = me_dune_14_tooltip
    }
    option = {
        name = "me_dune_14.b"
        set_capital = 2805
        custom_tooltip = me_dune_14_tooltip
    }
    option = {
        name = "me_dune_14.c"
        set_capital = 3735
        custom_tooltip = me_dune_14_tooltip
    }
    option = {
        name = "me_dune_14.d"
        set_capital = 3419
        custom_tooltip = me_dune_14_tooltip
    }
    option = {
        name = "me_dune_14.e"
        set_capital = 3034
        custom_tooltip = me_dune_14_tooltip
    }
    option = {
        name = "me_dune_14.f"
        set_capital = 3727
        custom_tooltip = me_dune_14_tooltip
    }
    option = {
        name = "me_dune_14.g"
        custom_tooltip = me_dune_14_tooltip
    }
}

me_dune.15 = {
    type = country_event

    title = me_dune_15_title
    desc = me_dune_15_desc
    picture = event_desert_castle
    left_portrait = current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_15.a"
        show_as_tooltip = {
            add_1_free_province_investments = yes
            p:3810 = {
                add_province_modifier = {
                    name = tobacco_of_apesh_mod
                    duration = -1
                }
            }
        }
        custom_tooltip = me_dune_15_tooltip
    }
}

me_dune.16 = {
    type = country_event

    title = me_dune_16_title
    desc = me_dune_16_desc
    picture = slaves_working
    left_portrait = current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_16.a"
        show_as_tooltip = {
            add_manpower = -10
            add_treasury = -200
        }
        p:3735 = {
            add_building_level = foundry_building
        }
        custom_tooltip = me_dune_16_tooltip
    }
}

me_dune.17 = {
    type = country_event

    title = me_dune_17_title
    desc = me_dune_17_desc
    picture = event_bread_basket
    left_portrait = current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_17.a"
        show_as_tooltip = {
            p:3735 = {
				add_permanent_province_modifier = {
					name = dune_food_stores
				}
			}
        }
        custom_tooltip = me_dune_17_tooltip
    }
}

me_dune.18 = {
    type = country_event

    title = me_dune_18_title
    desc = me_dune_18_desc
    picture = egypt2
    left_portrait = current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_18.a"
        capital_scope = {
            add_building_level = foundry_building
        }
        capital_scope = {
            create_pop = nobles
            create_pop = citizen
            create_pop = citizen
            create_pop = freemen
            create_pop = freemen
        }
        show_as_tooltip = {
            p:3735 = {
                add_permanent_province_modifier = {
                    name = grand_forum_of_djeba_mod
                    duration = -1
                }
            }
        }
        custom_tooltip = me_dune_18_tooltip
    }
}

# AI
me_dune.999 = {
    type = country_event

    title = me_dune_ai_title
    desc = me_dune_ai_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    trigger = {
        is_ai = yes
    }

    option = {
        name = "me_dune_ai.a"
        c:DUN = {
            trigger_event = {
                id = me_dune.2
                days = { 180 360 }
            }
        }
    }
}

