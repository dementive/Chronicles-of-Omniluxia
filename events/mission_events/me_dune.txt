namespace = me_dune

me_dune.1 = {
    type = country_event

    title = me_dune_1_title
    desc = me_dune_1_desc
    picture = army_desert
    left_portrait = current_ruler

    option = {
        name = "me_dune_1.a"
        custom_tooltip = me_dune_1_tooltip.a
        add_country_modifier = {
            name = senedejr_mod
            duration = 3652
        }
        hidden_effect = {
            create_unit = {
                navy = no
                name = "Senedejr's Faithful"
                location = capital_scope
                hidden_effect = {
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = heavy_infantry
                    add_subunit = light_cavalry  
                    add_subunit = light_cavalry
                    add_subunit = camels  
                    add_subunit = camels 
                    add_subunit = supply_train                                        
                    add_food = 150
                    add_morale = 3
                }
            }
        }
    }

    option = {
        name = "me_dune_1.b"
        custom_tooltip = me_dune_1_tooltip.b
        add_country_modifier = {
            name = khewer_mod
            duration = 3652
        }
        hidden_effect = {
            create_unit = {
                navy = no
                name = "Khewer's Liberators"
                location = capital_scope
                hidden_effect = {
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = heavy_infantry
                    add_subunit = light_cavalry  
                    add_subunit = light_cavalry
                    add_subunit = camels  
                    add_subunit = camels 
                    add_subunit = supply_train                                        
                    add_food = 150
                    add_morale = 3
                }
            }
        }
    }
}

# Dune attacks the Sertem
me_dune.2 = {
    type = country_event

    title = me_dune_2_title
    desc = me_dune_2_desc
    picture = army_desert
    left_portrait = current_ruler
    left_portrait = c:AGE.current_ruler
    right_portrait = c:EGY.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_2.a"
        custom_tooltip = me_dune_2_tooltip
        hidden_effect = {
            c:AGE = {
                trigger_event = { id = me_dune.3 }
            }
        }
    }
}

# Agaetep Unification and Reaction
me_dune.3 = {
    type = country_event

    title = me_dune_3_title
    desc = me_dune_3_desc
    picture = army_desert
    left_portrait = current_ruler
    left_portrait = c:AKH.current_ruler
    left_portrait = c:PTH.current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:EGY.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_3.a"
        custom_tooltip = me_dune_3_tooltip
        c:AGE = {
            make_subject = {
                target = PTH
                type = feudatory
            }
        }
        c:AGE = {
            make_subject = {
                target = AKH
                type = feudatory
            }
        }
        hidden_effect = {
            c:EGY = {
                trigger_event = { id = me_dune.4 }
            }
            create_unit = {
                navy = no
                name = "Upper Baetepian Allies"
                location = capital_scope
                hidden_effect = {
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = light_infantry
                    add_subunit = heavy_infantry
                    add_subunit = light_cavalry  
                    add_subunit = light_cavalry
                    add_subunit = camels  
                    add_subunit = camels 
                    add_subunit = supply_train                                        
                    add_food = 150
                    add_morale = 3
                }
            }
        }
    }
}

# Baetep Recieves News of Dune's Attack
me_dune.4 = {
    type = country_event

    title = me_dune_4_title
    desc = me_dune_4_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_4.a"
        custom_tooltip = me_dune_4_tooltip
        hidden_effect = {
            c:DUN = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 2805
                    target = EGY
                }
            }
            c:AGE = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 2805
                    target = EGY
                }
            }    
            # GLOBAL ANNOUNCEMENT
            every_country = {
                limit = {
                    NOT = {
                        OR = {
                            tag = EGY
                            country_culture_group = beatepian_upper
                        }
                    }
                }
                trigger_event = me_dune.5
            }
            # Razani Intervention
            c:EGA = {
                trigger_event = {
                    id = me_dune.6
                    days = { 30 90 }
                }
            }
        }
    }
}

# WORLD ANNOUNCEMENT WAR OF THE POMEGRANATE THRONE
me_dune.5 = {
    type = country_event

    title = me_dune_5_title
    desc = me_dune_5_desc
    picture = army_desert
    left_portrait = c:EGY.current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_5.a"
        custom_tooltip = me_dune_5_tooltip
    }
}

# Razani Intervention Decision
me_dune.6 = {
    type = country_event

    title = me_dune_6_title
    desc = me_dune_6_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:EGY.current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_6.a"
        custom_tooltip = me_dune_6_tooltip.a
        hidden_effect = {
            c:EGA = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 2672
                    target = EGY
                }
            }
            c:EGY = {
                trigger_event = { id = me_dune.7 }
            }
        }
    }

    option = {
        name = "me_dune_6.b"
        custom_tooltip = me_dune_6_tooltip.b
        add_stability = 3
        add_tyranny = 5
        hidden_effect = {
            c:KDM = {
                trigger_event = {
                    id = me_dune.8
                    days = { 30 90 }
                }
            }
        }
    }
}

# Baetep Recieves News of Razani Intervention
me_dune.7 = {
    type = country_event

    title = me_dune_7_title
    desc = me_dune_7_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:EGA.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_7.a"
        custom_tooltip = me_dune_7_tooltip
        hidden_effect = {
            c:KDM = {
                trigger_event = {
                    id = me_dune.8
                    days = { 30 90 }
                }
            }
        }
    }
}

# Golden Crusaders Intervention
me_dune.8 = {
    type = country_event

    title = me_dune_8_title
    desc = me_dune_8_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:EGY.current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_8.a"
        custom_tooltip = me_dune_8_tooltip.a
        hidden_effect = {
            c:KDM = {
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = 3388
                    target = EGY
                }
            }
            c:EGY = {
                trigger_event = { id = me_dune.9 }
            }
        }
    }

    option = {
        name = "me_dune_8.b"
        custom_tooltip = me_dune_8_tooltip.b
        add_stability = 3
        add_tyranny = 5
    }
}

# Baetep Recieves News of Golden Crusaders Intervention
me_dune.9 = {
    type = country_event

    title = me_dune_9_title
    desc = me_dune_9_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:KDM.current_ruler

    fire_only_once = yes

    option = {
        name = "me_dune_9.a"
        custom_tooltip = me_dune_9_tooltip
    }
}

# AI
me_dune.ai = {
    type = country_event

    title = me_dune_ai_title
    desc = me_dune_ai_desc
    picture = army_desert
    left_portrait = current_ruler
    right_portrait = c:DUN.current_ruler
    right_portrait = c:AGE.current_ruler

    fire_only_once = yes

    trigger = {
        is_ai = yes
    }

    option = {
        name = "me_dune_ai.a"
        c:DUN = {
            trigger_event = {
                id = me_dune.2
                days = { 180 360 }
            }
        }
    }
}

